<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="main.css" type="text/css" />
<link rel="stylesheet" href="blog.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="Subscribe to this page..." href="feed.rss" />
<title>Me Map/Reduce</title>
</head><body>
<div id="divbodyholder">
<div class="headerholder"><div class="header">
<div id="title">
<h1 class="nomargin"><a class="ablack" href="http://matt-at.keyboard-writes-code.com//index.html">Matt at Keyboard Writes Code</a></h1>
<div id="description">A blog about software development, technology and other things that interest me</div>
</div></div></div>
<div id="divbody"><div class="content">
<!-- entry begin -->
<h3><a class="ablack" href="2013-04-02-me-map-reduce.html">
Me Map/Reduce
</a></h3>
<!-- bashblog_timestamp: #201304020830.01# -->
<div class="subtitle">April 02, 2013 &mdash; 
Matt Forrester
</div>
<!-- text begin -->
<p>Me Map Reduce is inspired by MongoDB's map/reduce functionality.</p>
<p>In javascript you can easily do map/reduce in modern browsers using those methods already on the Array Class. But using these functions would always cause the output to be the same length as the input and there is little scope for changing the whole structure of the data. After having done the Free MongoDB Courses recently I saw how an emitting version of Map/Reduce could be used to do quite large scale data manipulations.</p>
<p>Taking this data:</p>
<pre><code>
{
    'car': ['Charles', 'Susan'],
    'computer': ['Matt', 'Charles','Rei'],
    'android': ['Matt', 'Susan', 'Rei','Cheryl'],
    'mountain_bike': ['Matt' ,'Cheryl'],
    'audible': ['Matt','Susan'],
    'piano': ['Rei']
};

</code></pre>
<p>With the following code:</p>
<pre><code>
var result = me_map_reduce(
    possessions,
    function(key,data,emit,extraData) {
        expect(extraData).to.equal('frog');
        var i = 0;
        for (i=0;i&#x3C;data.length;i++) {
            emit(data[i],key);
        }
    },
    function(emittedK,emittedValues,extraData) {
        emittedValues.push(extraData);
        return emittedValues;
    },
    'frog'
);

</code></pre>
<p>And you will have:</p>
<pre><code>
{
    Charles: ['car', 'computer', 'frog'],
    Susan: ['car', 'android', 'audible', 'frog'],
    Matt: ['computer', 'android', 'mountain_bike', 'audible', 'frog'],
    Rei: ['computer', 'android', 'piano', 'frog'],
    Cheryl: ['android', 'mountain_bike', 'frog']
}

</code></pre>
<p>This library is open source, available at <a href="https://github.com/forbesmyester/me_map_reduce">GitHub</a> and has been tested in:</p>
<ul>
<li>Node (mocha command line BDD tests included)</li>
<li>Chrome/FF with jQuery v1.9.1</li>
<li>Chrome/FF with Dojo v1.8.3</li>
<li>Chrome/FF with no other libraries</li>
<li>Internet Explorer 7 with jQuery</li>
</ul>




<!-- text end -->
<!-- entry end -->
</div>
<div id="footer">All rights reserved <a href="http://matt-at.keyboard-writes-code.com/me.html">Matt Forrester</a> &mdash; <a href="mailto:matt&#64;keyboardwritescode&#46;com">matt&#64;keyboardwritescode&#46;com</a><br/>
Generated with <a href="https://github.com/cfenollosa/bashblog">bashblog</a>, a single bash script to easily create blogs like this one</div>
</div></div>
</body></html>
